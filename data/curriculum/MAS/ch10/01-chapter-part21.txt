as messagesthat are passedup thetree,startingattheleaves,andthes’sasmessagesthatarepassedbackdown, startingattheroot. UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 10.6 Computationalapplicationsofmechanismdesign 315 0 1 2 3 1 −1 0 2 −1 1 1 2 1 1 1 0 2 0 3 1 0 2 1 1 2 1 (a)Multicast spanningtree: nodes arela- (b) Upward pass: each node i computes beledwithvalues, edges arelabeled with miandpassesittoitsparent. costs. 1 0 −1 1 −1 1 0 1 1 −1 0 −1 0 1 0 0 2 0 0 2 (c)Downwardpass: eachnodeicomputes (d)FinalAllocation:onlyconnectededges sjforchildjandpassesitdown. are shown; nodes are labeled with payments. Figure10.8: AnexamplerunofthealgorithmfromFigure10.7. Freeforon-screenuse;pleasedonotdistribute.Youcangetanotherfreecopy ofthisPDFororderthebookathttp://www.masfoundations.org. 316 10 ProtocolsforStrategicAgents:MechanismDesign Letusconsiderapplyingthisalgorithmtoasamplemulticastspanningtree(Figure 10.8a). In the upward pass (Figure 10.8b), every node i computes m , the i marginalvalueconnectingitothenetwork,giventhatitsparentisconnected.This is the maximum amount the agents on the subtree rooted at i would be willing to pay to join the multicast. In the downward pass (Figure 10.8c), every node i computess foreachchildnodej. s istheactualtotalsurplusgeneratedbyconj j nectingj tothemulticasttree. Ifm ors isnegative,theefficientallocationdoes j j notconnectj. Thus,s canalsobeseenasthemaximumamountbywhichagents j inthesubtreerootedats couldreducetheirjointvaluedeclarationwhileremainj ingconnected. Eachconnectednodej ischargedmax(vˆ s ,0), meaningthat j j − hissurplusis equaltotheamounthecouldhaveunder-reportedhisvaluewithout beingdisconnected.ThesepaymentsareillustratedinFigure10.8d. 10.6.4 Two-sidedmatching Sofarinthischapterwehaveconcentratedonmechanismdesigninquasilinearsettings,meaningthatwehaveassumedthatmoneycanbetransferredbetweenagents and the mechanism. However, there exist many interesting settings where such transfers are impossible, for example, because of legal restrictions. Examples of suchproblemsincludekidneyexchanges,collegeadmissions,andtheassignment two-sided ofmedicalinternstohospitals. Two-sidedmatchingisawidelystudiedmodelthat matching canbeusedtodescribesuchdomains.Underthismodel,eachagentbelongstoone of two groups. Members of each group are matched up, based on their declared preferencesovertheircandidatepartners. Themechanismdesignproblemistoinduceagentstodisclosethesepreferencesinawaythatallowsadesirablematching tobechosen,despitetherestrictionthatpaymentscannotbeimposed. We will use the running example of a cohort of graduate students who must align with thesis advisors. Each student has a preference ordering over advisors (dependingontheirresearchinterests,personalities,etc.),andlikewiseeachpotentialadvisorhasapreferenceorderingoverstudents. Inthissettingasocialchoice functionis adecisionaboutwhichstudentsshouldbeassignedto whichadvisors, giventheirpreferences;asalways,themechanismdesignconcernishowtoimplementadesiredsocialchoicefunction. Wenowdefinethesettingmoreformally. LetAbeasetofadvisorsandletS be asetofgraduatestudents. Wedonotassumethat A = S ; thus,somestudents | | | | and/or advisors may remain unpaired. We assume that each student can have at most one advisor and each advisor will take at most one new student.13 Each studentihasapreferenceordering overtheadvisors,andeachadvisorj hasa i ≻ preferenceordering overthestudents. We write a a′ to meanthatstudent j s ≻ ≻ s prefers advisor a to advisor a′, and ∅ a to mean that s prefers not finding s ≻ asupervisorto aligningwith advisora. In thelattercasewesaythatadvisorais unacceptable unacceptabletostudents. Similarly,wewrites s′ and∅ s. Notethatwe a a ≻ ≻ matching 13. Manybutnotalloftheresultsinthissectioncanalsobeextendedtothecasewhereadvisorscantake UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 10.6 Computationalapplicationsofmechanismdesign 317 haveassumedthatallpreferencesarestrict,14 butthateachagentcanidentifyaset ofpartners with whom he would prefernotto be matched, effectivelyexpressing atie amongunacceptablepartners. Inwhatfollows,weadopttheconventionthat alladvisorsarefemaleandallstudentsaremale. Theresultingproblemoffinding good male–female pairings pays homage to the problem introduced in the twostablemarriage sidedmatchingliteratureahalf-centuryago,so-calledstablemarriage. matching Definition10.6.7(Matching) A matching µ : A S A S ∅ is an ∪ → ∪ ∪ { } assignment of advisors to students such that each advisor is assigned to at most one student and vice versa. More formally, µ(s) = a if and only if µ(a) = s. Furthermore, s S, either a A,µ(s) = a or µ(s) = ∅ (the student is ∀ ∈ ∃ ∈ unpaired),andlikewise a A,either s S,µ(a) = sorµ(a)= ∅. ∀ ∈ ∃ ∈ Note that it is always possible that some student s has the same match under two different matchings µ and µ′, that is µ(s) = µ′(s). In this case, s must be indifferent between matchings µ and µ′. A similar