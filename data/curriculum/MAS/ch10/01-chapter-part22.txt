argument is true for advisors. Therefore, we use the operator as well as when describing an agent’s pref- (cid:23) ≻ erencerelation overmatchings. More formally, µ(s) µ′(s) means that either s (cid:23) µ(s) µ′(s) or µ(s) = µ′(s). Similarly, µ(a) µ′(a) means that either s a ≻ (cid:23) µ(a) µ′(a)orµ(a)= µ′(a). a ≻ Clearly,therearemanypossiblematchings.Thekeyquestioniswhichmatching should be chosen, given students’ and advisors’ preference orderings. In other words,whatpropertiesdoesadesirablematchinghave? Weidentifytwo. individually Definition10.6.8(Individualrationality) Amatchingµisindividuallyrationalif rational noagentipreferstoremainunmatchedthantobematchedtoµ(i). matching Definition10.6.9(Unblocked) A matchingµ is unblockedif there exists no pair unblocked (s,a)suchthatµ(s) = a,buta µ(s)ands µ(a). matching 6 ≻ s ≻ a Intuitively, a matching is individually rational if no agent is matched with an unacceptable partner; a matching is unblocked if there exists no pair that would prefer to be matched with each other than with their respective partners. Putting thesetwodefinitionstogether,weobtaintheconceptofastablematching. stablematching Definition10.6.10(Stablematching) A matching µ is stable if and only if it is individuallyrationalandunblocked. It turns out that in the setting we havedefined above, no matterhow many studentsandadvisorsthereareandwhatpreferencestheyhave,therealwaysexistsat leastonestablematching. Theorem10.6.11(GaleandShapley,1962) Astablematchingalwaysexists. multiplestudents. 14. Ourassumptionthatpreferencesarestrictisrestrictive;someoftheresultspresentedinthissectionno longerholdifitisrelaxed. Freeforon-screenuse;pleasedonotdistribute.Youcangetanotherfreecopy ofthisPDFororderthebookathttp://www.masfoundations.org. 318 10 ProtocolsforStrategicAgents:MechanismDesign Step1: eachstudentappliestohismostpreferredadvisor. repeat Step2: eachadvisorkeepshermostpreferredacceptableapplication(if any)andrejectstherest(ifany). Step3: eachstudentwhowasrejectedatthepreviousstepappliestohis nextacceptablechoice. untilnostudentappliedinthelaststep Figure10.9: Deferredacceptancealgorithm,student-applicationversion. Proof. The proof is obtained by giving a procedure that produces a stable matching given any set of student and advisor preferences. Here, we describe the so-called “student-application” version of the algorithm (Figure 10.9). There is an analogous algorithm in which advisors apply to students. This algorithm must stop in at most a quadratic number of steps, since no studenteverapplies more than once to any advisor. The outcome is a matching,sinceatanystepeachstudentispairedwithatmostoneadvisorandvice versa.Thematchingisindividuallyrational,sincenostudentoradvisorisever matchedtoanunacceptableagent. Itonlyremainstoshowthatthematchingisunblocked. Letµbethematchingproducedbythealgorithm. Assumeforcontradictionthatµisblockedby somestudentsandadvisora. Sincesprefersatohisownmatchatµ,amust be acceptable to s, and so he must have applied to her before having applied tohismatch. Sincesisnotmatchedtoain µ,hemusthavebeenrejectedby herinfavorofsomeoneshelikedbetter. Therefore,(s,a)doesnotblockµ,a contradiction. Thus,therealwaysexistsatleastonestablematching.However,thesematchings are not necessarily unique—given a set of student and advisor preferences, there may exist many stable matchings. Let us now consider how different matchings canbecompared. student-optimal Definition10.6.12 Astablematchingµisstudentoptimalifeverystudentlikesit matching atleastaswellasanyotherstablematching;thatis, s S andforeveryother ∀ ∈ stablematchingµ′,µ(s) µ′(s). s (cid:23) advisor-optimal Along the same lines, we can define advisor-optimal matching. Now we can matching drawthefollowingconclusionsaboutstablematchings. Theorem10.6.13 There exists exactly one student-optimal stable matching and oneadvisor-optimalstablematching.Thematchingproducedbythestudent-application versionofthe deferredapplicationalgorithm is the student-optimalstable matching,andthematchingproducedbytheadvisor-applicationversionofthedeferred applicationalgorithmistheadvisor-optimalstablematching. UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 10.6 Computationalapplicationsofmechanismdesign 319 Next, it turns out that any stable matching that is better for all the students is worseforalltheadvisorsandviceversa. Theorem10.6.14 Ifµandµ′arestablematchings, s S,µ(s) µ′(s)ifand s ∀ ∈ (cid:23) onlyif a A,µ′(a) µ(a). a ∀ ∈ (cid:23) achievable Say that an advisor a is achievable for student s, and vice versa, if there is match a stable matching µ that matches a to s. Then we can state one implication of the above theorem: that the student-optimal stable matching is the worst stable matchingfromeachadvisor’spointofview,andviceversa. Corollary10.6.15 Thestudent-optimalstablematchingmatcheseachadvisorwith her least preferred achievable student, and the advisor-optimal stable matching matcheseachstudentwithherleastpreferredachievableadvisor. Now let us moveto the mechanismdesign question. If agents’preferencesare privateinformation, can we find a mechanismthatensures thata stable matching willbeachieved?Asiscommoninthematchingliterature,werestrictourattention to settings in which neither the agents’equilibrium strategies nor the mechanism itselfareallowedtodependonthedistributionoveragents’preferences. Thus,we mustrelyoneitherdominant-strategyorexpostequilibriumimplementation. Unfortunately,itturnsoutthatstablematchingscannotbeimplementedundereither equilibriumconcept. Theorem10.6.16 Nomechanismimplementsstablematchingindominantstrategies. Proof. Bytherevelationprinciple,ifsuchamechanismexists,thentherealso existsadirecttruthfulmechanismthatselectsmatchingsthatarestablewithrespecttothedeclaredpreferenceorderings.Considerasettingwithtwostudents, s and s , and