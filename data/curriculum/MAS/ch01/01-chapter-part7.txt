In the first cycle (Figure 1.6) all agents select values for their variables, which representthepositionsoftheirqueensalongtheirrespectiverows. Arbitrarily,we assumethateachbeginsbypositioninghisqueenatthefirstsquareofhisrow. Each agent 1, 2, and 3 sends ok? messages to the agents ordered after him: A sends 1 three messages, A sends two, and agent A sends a single message. Agent A 2 3 4 doesnothaveanyagentafterhim,sohesendsnomessages. Allagentsareactive inthisfirstcycleofthealgorithm’srun. Inthesecondcycle(Figure1.7)agentsA ,A ,andA receivetheok? messages 2 3 4 sentto them and proceedto assignconsistentvaluesto their variables. AgentA 3 assigns the value 4 that is consistent with the assignments of A and A that he 1 2 receives.AgentA hasnovalueconsistentwiththeassignmentsofA ,A ,andA , 4 1 2 3 andsohesendsaNogoodcontainingthesethreeassignmentstoA andremoves 3 theassignmentofA fromhisAgent_View. Then,heassignsthevalue2which 3 isconsistentwiththeassignmentsthathereceivedfromA andA (havingerased 1 2 the assignment of A , assuming that it will be replaced because of the Nogood 3 message). The active agents in this cycle are A , A , and A . Agent A acts 2 3 4 2 accordingto his information aboutA ’s position and moves to square 3, sending 1 two ok? messages to inform his successors about his value. As can be seen in Figure1.7,A hasmovedtosquare4afterreceivingtheok? messagesofagentsA 3 1 andA . NotethatagentA thinksthattheseagentsarestillinthefirstcolumnof 2 3 theirrespectiverows. Thisisamanifestationofconcurrencythatcauseseachagent toactatalltimesinaformthatisbasedonlyonhisAgent_View.TheAgent_View ofagentA includestheok? messageshereceived. 3 The third cycle is described in Figure 1.8; only A is active. After receiving 3 the assignment of agent A , A sends back a Nogood message to agent A . He 2 3 2 thenerasesthe assignmentofagentA fromhis Agent_View andvalidatesthat 2 UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 1.3 Heuristicsearchalgorithms 15 (cid:68)(cid:52) (cid:68)(cid:52) (cid:68)(cid:53) (cid:68)(cid:53) Nogood (cid:68)(cid:54) (cid:68)(cid:54) OK? OK? (cid:68)(cid:55) (cid:68)(cid:55) Figure1.8: Cycle 3. Only A is active. 3 The Nogood message is A = 1 1 → A = 3. 2 6 OK? OK? OK? Nogood Figure1.9: Cycles4and5. A ,A and 2 3 A are active. The Nogoodmessageis 4 A = 1 A = 4 A = 4. 1 2 3 ∧ → 6 hiscurrentassignment(thevalue4)isconsistentwiththeassignmentofagentA . 1 AgentsA andA continuetobeidle,havingreceivednomessagesthatweresent 1 2 incycle2. ThesameistrueforagentA . AgentA alsoreceivestheNogoodsent 4 3 byA incycle2butignoresitsinceitincludesaninvalidassignmentforA (i.e., 4 2 (2,1)andnotthecurrentlycorrect(2,4)). Cycles4and5aredepictedinFigure1.9. Incycle4agentA movestosquare 2 4becauseoftheNogoodmessagehereceived. Hisformervaluewasruledoutand the new value is the nextvalid one. He informs his successorsA and A of his 3 4 new position by sending two ok? messages. In cycle 5 agent A receives agent 3 A ’s newpositionandselectstheonlyvaluethatis compatiblewiththepositions 2 ofhistwopredecessors,square2. Hesendsamessagetohissuccessorinforming himaboutthis newvalue. AgentA is nowleftwithnovalidvalueto assignand 4 sendsaNogoodmessagetoA thatincludesallhisconflicts. TheNogoodmessage 3 appears at the bottom of Figure 1.9. Note that the Nogood message is no longer valid. AgentA ,however,assumesthatA willchangehispositionandmovesto 4 3 hisonlyvalidposition(givenA ’santicipatedmove)—column3. 3 Considernowcycle6. AgentA receivesthenewassignmentofagentA and 4 3 sendshima Nogoodmessage. HavingerasedtheassignmentofA aftersending 3 theNogoodmessage,hethendecidestostayathiscurrentassignment(column3), sinceitiscompatiblewiththepositionsofagentsA andA . AgentA isidlein 1 2 3 cycle6,sincehereceivesnomessagesfromeitheragentA oragentA (whoare 1 2 idletoo). So,A istheonlyactiveagentatcycle6(seeFigure1.10). 4 Ineachofcycles7and8,oneNogoodissent. BotharedepictedinFigure1.11. First, agent A , after receiving the Nogood message from A , finds that he has 3 4 no valid values left and sends a Nogood to A . Next, in cycle 8, agent A also 2 2 discovers that his domain of values is exhausted and sends a Nogood message to A . Both sending agents erase the values of their