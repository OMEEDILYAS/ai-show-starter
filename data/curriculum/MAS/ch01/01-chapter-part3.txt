Atthispointnofurtherchangestakeplaceand { } thealgorithmterminateswithacorrectsolution. (b)Thealgorithmstartsasbefore,butoncex andx receivex ’smessagethey 2 3 1 each reduce their domains to blue . Now, when they update each other on { } theirnewdomains,theyeachreducetheirdomainsto ,theemptyset. Atthis {} pointthealgorithmterminatesandcorrectlyannouncesthatnosolutionexists. (c)Inthiscasetheinitialsetofmessagesyieldsnoreductioninanydomain. The algorithmterminates,butallthenodeshavemultiplevaluesremaining. Andso thealgorithmisnotabletoshowthattheproblemisoverconstrainedandhasno solution. (d)Filteringcanalsofailwhenasolutionexists. Forsimilarreasonsasininstance (c), the algorithm is unable to show that in this case the problem does have a solution. Ingeneral,filtering isa veryweakmethodand,atbest, isusedas apreprocessing step for more sophisticated methods. The algorithm is directly based on the unitresolution notionofunitresolutionfrompropositionallogic. Unitresolutionisthefollowing inferencerule: A 1 (A A A ) 1 2 n ¬ ∧ ∧···∧ (A A ) 2 n ¬ ∧···∧ To see how the filtering algorithmcorrespondsto unitresolution, we mustfirst Nogood writetheconstraintsasforbiddenvaluecombinations,calledNogoods. Forexample,theconstraintthatx andx cannotbothtakethevalue“red”wouldgiverise 1 2 tothepropositionalsentence (x =red x = red),whichwewriteastheNo1 2 ¬ ∧ good x ,x . Ininstance(b)ofFigure1.4, agentX updatedhis domainbased 1 2 2 { } on agent X ’s announcementthat x = red and the Nogood x = red,x = 1 1 1 2 { red . } x = red 1 (x = red x = red) 1 2 ¬ ∧ (x = red) 2 ¬ UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 1.2 Domain-pruningalgorithms 7 Unitresolutionisaweakinferencerule,andsoitisnotsurprisingthatthefilterhyper-resolution ingalgorithmis weakas well. Hyper-resolutionisa generalizationofunitresolutionandhasthefollowingform: A A A 1 2 m ∨ ∨···∨ (A A A ) 1 1,1 1,2 ¬ ∧ ∧ ∧··· (A A A ) 2 2,1 2,2 ¬ ∧ ∧ ∧··· . . . (A A A ) m m,1 m,2 ¬ ∧ ∧ ∧··· (A A A ) 1,1 2,1 m,1 ¬ ∧···∧ ∧···∧ ∧··· Hyper-resolutionisbothsoundandcompleteforpropositionallogic,andindeed itgivesrisetoacompletedistributedCSPalgorithm. Inthisalgorithm,eachagent repeatedlygeneratesnewconstraintsforhisneighbors,notifiesthemofthesenew constraints,andpruneshisowndomainbasedonnewconstraintspassedtohimby hisneighbors.Specifically,heexecutesthefollowingalgorithm,whereNG isthe i set of all Nogoods of which agent i is aware and NG∗ is a set of new Nogoods j communicatedfromagentj toagenti. procedureReviseHR(NG ,NG∗) i j repeat NG NG NG∗ i ← i j letNG∗ denotethesetofnewNogoodsthaticanderivefromNG and i i S hisdomainusinghyper-resolution if NG∗ isnonemptythen i NG NG NG∗ i ← i i sendtheNogoodsNG∗ toallneighborsofi i if NG∗ t S hen {s}to∈p i untilthereisnochangeini’ssetofNogoodsNG i The algorithm is guaranteedto convergein the sense that after sending and receiving a finite number of messages, each agent will stop sending messages and generating Nogoods. Furthermore, the algorithm is complete. The problem has a solution iff, on completion, no agent has generated the empty Nogood. (Obviously,everysupersetofaNogoodisalsoforbidden,andthusifasinglenodeever generatesanemptyNogoodthentheproblemhasnosolution.) Consider again instance (c) of the CSP problem in Figure 1.4. In contrast to the filtering algorithm, the hyper-resolution-basedalgorithm proceeds as follows. Initially,x maintainsfourNogoods— x = red,x = red , x = red,x = 1 1 2 1 3 { } { red , } x = blue,x = blue , x = blue,x = blue —whicharederiveddirectly 1 2 1 3 { } { } Freeforon-screenuse;pleasedonotdistribute.Youcangetanotherfreecopy ofthisPDFororderthebookathttp://www.masfoundations.org. 8 1 DistributedConstraintSatisfaction fromtheconstraintsinvolvingx . Furthermore,x mustadoptoneofthevaluesin 1 1 hisdomain,sox = red x = blue. Usinghyper-resolution,x canreason: 1 1 1 ∨ x = red x = blue 1 1 ∨ (x = red x = red) 1 2 ¬ ∧ (x = blue x = blue) 1 3 ¬ ∧ (x = red x = blue) 2 3 ¬ ∧ Thus,x constructsthenewNogood x = red,x = blue ;inasimilarway 1 2 3