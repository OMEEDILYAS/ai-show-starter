not). Thus, among all the possible sequences of global states, only some are legal according to the protocol. We will callanyfinite prefixofsuchalegalsequenceofglobalstatesa history history. Thesehistorieswillbethepossibleworldsinourmodel. Forexample,considerthefollowingpossiblesequenceofevents,giventhenaive protocol: S sendsan“attack”messagetoR,Rreceivesthemessageandsendsan acknowledgment to S, and S receives the acknowledgment. The history correspondingtothisscenariois (0,0),(0,0) , (1,0),(1,0) , (1,1),(1,1) h i h i h i . Thestructureofourpossibleworldssuggestsanaturaldefinitionofthepartition associatedwith eachofthe agents. We willsaythattwo historiesare inthe same equivalenceclassofagenti(i S,R )iftheirrespectivefinalglobalstateshave ∈ { } identicallocalstateforagenti. Thatis,history (0,0),(0,0) , x ,x ,..., x ,x S,1 R,1 S,k R,k h i h i h i isindistinguishableintheeyesofagentifromhistory (0,0),(0,0) , y ,y ,..., y ,y S,1 R,1 S,l R,l h i h i h i if and only if x = y . Note a very satisfying aspect of this definition; the i,k i,l accessibilityrelation,whichingeneralisthoughtofasanabstractnotion,isgiven hereaconcreteinterpretationintermsoflocalandglobalstates. Wecannowreasonformallyaboutthenaiveprotocol. Consideragainthepossiblehistorymentionedabove: (0,0),(0,0) , (1,0),(1,0) , (1,1),(1,1) . h i h i h i The readercan verify that in this possible world the following sentences are true: K attack,K attack,K K attack. However, it is also the case that this S R S R worldsatisfies K K K attack. Intuitivelyspeaking,RdoesnotknowthatS R S R ¬ Freeforon-screenuse;pleasedonotdistribute.Youcangetanotherfreecopy ofthisPDFororderthebookathttp://www.masfoundations.org. 422 13 LogicsofKnowledgeandBelief knows that R knows that S intends to attack, since for all R knows its acknowledgmentcouldhavebeenlost. ThusRcannotproceedtoattack;hereasonsthatif indeedtheacknowledgementwaslostthenS willnotdareattack. This ofcoursesuggestsa fix—haveS acknowledgeR’s acknowledgement. To accommodatethiswewouldneedtoaugmenteachofthelocalstateswithanother binaryvariable,representingforS whetherthesecondacknowledgementwassent andforRwhetheritwasreceived.Howeveritisnothardtoseethatthisalsohasa flaw;assumingS’ssecondacknowledgementindeedgoesthrough,intheresulting historywewillhaveK K K attackhold,butnotK K K K attack. Can R S R S R S R thisbefixed,andwhatisthegeneralknowledgeconditionwemustaimfor? common Itturnsoutthattherequiredconditionis whatis knownascommonknowledge. knowledge This is a veryintuitivenotion, andwe defineitin two steps. We firstdefine what it means that everybodyknows a particular sentence to be true. To represent this we usethe symbolE , whereG is a particulargroupofagents. The “everybody G knows” operatorhas the same syntactic rules as the knowledgeoperator. As one mightexpect,thesemanticscanbedefinedeasilyintermsofthebasicknowledge operator. Wedefinethesemanticsasfollows. Definition13.4.1(“Everyoneknows”) LetM beaKripkestructure,w beapossibleworldinM,Gbeagroupofagents,andϕbeasentenceofmodallogic. Then M,w = E ϕ ifandonlyif M,w′ = ϕfor allw′ I (w). (Equivalently, G i∈G i | | ∈ ∪ wecanrequirethat i GitisthecasethatM,w = K ϕ.) i ∀ ∈ | Inotherwords, everybodyknowsa sentencewhenthe sentenceis true inallof the worlds that are considered possible in the current world by any agent in the group. Using this concept we can define the notion of common knowledge, or, as it is sometimes called lightheartedly, “what any fool knows.” If “any fool” knows something, then we can assume that everybody knows it, and everybody knows that everybody knows it, and so on. An example from the real world might be theassumptionweusewhendrivinga carthatallofthe otherdriversontheroad alsoknowtherulesoftheroad, andthattheyknowthatwe knowthe rulesofthe road,andthattheyknowthatweknowthattheyknowthem,andsoon. Werequire aninfiniteseries of“everybodyknows”in orderto capturethis intuition. Forthis reasonweusethefollowingrecursivedefinition. Definition13.4.2(Commonknowledge) Let M be a Kripke structure, w be a possibleworldinM,Gbeagroupofagents,andϕbeasentenceofmodallogic. ThenM,w = C ϕifandonlyifM,w = E (ϕ C ϕ) G G G | | ∧ In other words, a sentence is common knowledge if everybody knows it and knows that it is common knowledge. This formula is called the fixed-point axfixed-point iom,sinceC ϕcanbeviewedasthefixed-pointsolutionoftheequationf(x) = G axiom E (ϕ f(x)). Fixed-point definitions are notoriously hard to understand intuG ∧ itively. Fortunately,wecangivealternativecharacterizationsofC . First,we can G giveadirectsemanticdefinition. UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 13.5 Doingtime,andanapplicationtorobotics 423 Theorem13.4.3 LetM beaKripkestructure,wbeapossibleworldinM,Gbe agroupofagents,andϕbeasentenceofmodallogic. ThenM,w = C ϕifand G