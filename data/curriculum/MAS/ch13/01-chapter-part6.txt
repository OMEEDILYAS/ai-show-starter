follow from the other axioms. Consider now the class of Kripke structures in which axiom 5 is sound and complete. Informally speaking, we want to ensure that if two worlds are accessible from the current world, then they are also accessible from each other. Formally, we say that the accessibility Euclidean relation must be Euclidean. (A binary relation X overdomain Y is Euclidean if accessibility andonlyifforally,y′,y′′ Y itisthecasethatif(y,y′) X and(y,y′′) X relation then(y′,y′′) Y.) ∈ ∈ ∈ ∈ At this point the reader may feel confused. After all, we started with a very simple class of Kripke structures—partition models—in which each accessibility relationisasimpleequivalencerelation. Then,inourpursuitofaxiomsthatcapture thenotionofknowledgedefinedinpartitionmodels,wehavelookedatincreasingly baroquepropertiesofaccessibilityrelationsandassociatedaxioms,assummarized inTable13.1. Name Axiom AccessibilityRelation AxiomK (K i(ϕ)∧K i(ϕ→ψ))→K i(ψ) NA AxiomD ¬K i(p∧¬p) Serial AxiomT K i ϕ→ϕ Reflexive Axiom4 K i ϕ→K i K i ϕ Transitive Axiom5 ¬K i ϕ→K i¬K i ϕ Euclidean Table13.1: Axiomsandcorrespondingconstraintsontheaccessibilityrelation. Whatdothesecomplicatedpropertieshavetodowiththesimplepartitionmodelsthatstartedthisdiscussion? Theanswerliesinthefollowingobservation. Proposition13.3.9 Abinaryrelationisanequivalencerelationifandonlyifitis reflexive,transitive,andEuclidean. Indeed,thesystemKT45(whichresultsfromaddingtotheaxiomsystemKall theaxiomsT, 4, and5), exactlycapturesthepropertiesofknowledgeasdefined Freeforon-screenuse;pleasedonotdistribute.Youcangetanotherfreecopy ofthisPDFororderthebookathttp://www.masfoundations.org. 420 13 LogicsofKnowledgeandBelief by the partition model. System KT45 is also known by another, more common name—theS5 axiom system. S5 is both soundand completefor the class of all partition models. However, we are able to state an even more general theorem, whichwillserveuswelllaterwhenwediscussmovingfromknowledgetobelief. Theorem13.3.10 LetXbeasubsetof D,T,4,5 andlet bethecorrespond- { } X ing subsetof {serial, reflexive, transitive, Euclidean}. Then K X (which is the ∪ basicaxiomsystemKwiththeappropriatesubsetofaxiomsadded)isasoundand completeaxiomatizationofK fortheclassofKripkestructureswhoseaccessibili ityrelationssatisfy . X 13.4 Commonknowledge, and anapplicationto distributed systems Earlier we discussed the domain of distributed systems. The following example illustratesthesortofreasoningonewouldliketoperforminthatcontext. (Incase this problem does not sound like distributed computing to you, imagine that the generalsarecomputerprocesses,whicharetryingtocommunicatereliablyovera faultycommunicationline.) Two generals standing on opposing hilltops are trying to communicate in orderto coordinatean attackon a third general, whosearmy sitsinthevalleybetweenthem. Thetwogeneralsarecommunicating via messengers who must travel across enemy lines to deliver their messages. Anymessengercarriestheriskofbeingcaught,inwhich case the message is lost. (Alas, the fate of the messenger is of no concernin this story.) Eachofthe two generalswants to attack, but onlyiftheotherdoes;iftheybothattacktheywillwin,buteitherone willloseifheattacksalone. Giventhiscontext,whatprotocolcanthe generalsestablishthatwillensurethattheyattacksimultaneously? You might imaginethe following naivecommunicationprotocol. The protocol forthefirstgeneral,S,istosendan“attacktomorrow”messagetogeneralRand tokeepsendingthismessagerepeatedlyuntilhereceivesanacknowledgmentthat themessagewasreceived.Theprotocolforthesecondgeneral,R,istodonothing until he receives the message from S, and then send a single acknowledgment messagebacktogeneralS. Thequestioniswhethertheagentscanhaveaplanof attackbasedonthis protocol,whichalwaysguarantees—or,less ambitiously,can sometimesguarantee—thattheyattacksimultaneously. Andifnot,canadifferent protocolachievethisguarantee? Clearly,itwouldbeusefultoreasonaboutthisscenariorigorously. Itseemsintuitivethattheformalnotionof“knowledge”shouldapplyhere,butthequestionis preciselyhow. Inparticular,whatistheknowledgeconditionthatmustbeattained inordertoensureacoordinatedattack? To apply the partition model of knowledge we need to first define the possible worlds. We will do this by first defining the local state of each agent (i.e., each UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 13.4 Commonknowledge,andanapplicationtodistributedsystems 421 general); together the two local states will form a global state. To reason about the naive protocol, we will have the local state for S representtwo binary pieces of information: whether or not an “attack” message was sent and whether or not an acknowledgment was received. The local state for R will also represent two binary pieces of information: whether or not an “attack” message was received and whether or not an acknowledgmentmessage was sent. Thus we end up with the four possible local states for each general—(0,0),(0,1),(1,0), and (1,1)— andthussixteenpossibleglobalstates. Wearenowreadytodefinethepossibleworldsofourmodel. Theinitialglobal stateiswelldefined—byconvention,wecallit (0,0),(0,0) . Itwillthenevolve h i basedontwofactors—thedictatesoftheprotocol,andthenondeterministiceffect of nature (which decides whether a message is received or