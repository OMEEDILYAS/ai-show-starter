i − j|xj∈T j setoftimeslotsallocatedtoagentimaximizeshissurplusatpricesp); P • For all j such that x F it is the case that p = q (the price of all j ∅ j j ∈ unallocatedtimeslotsisthereserveprice);and • Foralljsuchthatx F itisthecasethatp q (thepriceofallallocated j ∅ j j 6∈ ≥ timeslotsisgreaterthanthereserveprice). As was the case in the assignment problem, a solution that is in competitive equilibriumisguaranteedtobeoptimal. Theorem2.3.12 If a solution F to a scheduling problem C is in equilibrium at pricesp,thenF isalsooptimalforC. We give an informal proof to facilitate understanding of the theorem. Assume thatF isinequilibriumatpricesp;wewouldliketoshowthatthetotalvalueofF ishigherthanthetotalvalueofanyothersolutionF′. Startingwiththedefinition of the total value of the solution F, the following equations show this inequality foranarbitraryF′. V(F) = q + v (F ) j i i j|x Xj∈F∅ X i∈N = p + v (F ) j i i j|x Xj∈F∅ X i∈N = p + v (F ) p j  i i − j j| X xj∈X X i∈N j|x Xj∈Fi   p + v (F′) p = V(F′) ≥ j  i i − j  j| X xj∈X X i∈N j|x Xj∈F i ′   Thelastlinecomesfromthedefinitionofacompetitiveequilibrium,foreachagent i, there doesnotexistanotherallocation F′ thatwould yield a largerprofitatthe i currentprices (formally, i,F′ v (F ) p v (F′) p ). ∀ i i i − j|xj∈Fi j ≥ i i − j|xj∈F i ′ j Applying this condition to all agents, it follows that there exists no alternative P P allocationF′ withahighertotalvalue. Consider our sample scheduling problem. A competitive equilibrium for that problemisshowninthefollowingtable. Freeforon-screenuse;pleasedonotdistribute.Youcangetanotherfreecopy ofthisPDFororderthebookathttp://www.masfoundations.org. 40 2 DistributedOptimization timeslot agent price 9:00A.M. 2 $6.25 10:00A.M. 2 $6.25 11:00A.M. 1 $6.25 12:00P.M. 1 $3.25 13:00P.M. 4 $3.25 14:00P.M. 4 $3.25 15:00P.M. 4 $3.25 16:00P.M. 4 $3.25 Note that the price of all allocated time slots is higher than the reserve prices of $3.00. Also note that the allocation of time slots to each agent maximizes his surplus at the prices p. Finally, also notice that the solution is stable, in that no agentcanprofitbymakinganofferforanalternativebundleatthecurrentprices. Even before we ask how we might find such a competitive equilibrium, we should note that one does not always exist. Consider a modified version of our scheduling example, in which the processor has two one-hourtime slots, at 9:00 A.M.and at 10:00 A.M., and there are two jobs as in Table 2.1. The reserve price job length(λ) deadline(d) worth(w) 1 2hours 11:00A.M. $10.00 2 1hour 11:00A.M. $6.00 Table2.1: Aproblematicschedulingexample. is $3 per hour. We show that no competitive equilibrium exists by case analysis. Clearly,ifagent1isallocatedaslothemustbeallocatedbothslots. Butthentheir combined price cannot exceed $10, and thus for at least one of those hours the pricemustnotexceed$5. However,agent2iswillingtopayasmuchas$6forthat hour,andthusweareoutofequilibrium. Similarly, ifagent2isallocatedatleast one of the two slots, their combined price cannot exceed $6, his value. But then agent1 wouldhappilypay moreandgetbothslots. Finally, we cannothaveboth slotsunallocated,sincein thiscasetheircombinedpricewouldbe$6,thesumof thereserveprices,inwhichcasebothagentswouldhavetheincentivetobuy. Thisinstabilityarisesfromthefactthattheagents’utilityfunctionsaresuperadditive (or, equivalently, that there are complementary goods). This suggest some restrictiveconditionsunderwhichweareguaranteedtheexistenceofacompetitive equilibriumsolution. Thefirsttheoremcapturestheessentialconnectiontolinear programming. Theorem2.3.13 A scheduling problem has a competitive equilibrium solution if andonlyiftheLPrelaxationoftheassociatedintegerprogramhasaintegersolution. UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 2.3 Negotiation,auctionsandoptimization 41 Thefollowingtheoremcapturesweakersufficientconditionsfortheexistenceof acompetitiveequilibriumsolution. Theorem2.3.14 A scheduling problem has a competitive equilibrium solution if anyoneofthefollowingconditionshold: • Forallagentsi