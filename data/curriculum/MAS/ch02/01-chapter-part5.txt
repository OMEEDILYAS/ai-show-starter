)]. 4 2 2 4 4 3 4 a4 Theactualimplementationofthisprocedureallowsseveralversions. Herearea fewofthem: A quick-down, slow-up two-pass sequential implementation: This follows the exampleinthatvariablesareeliminatedsymbolicallyoneatatimestartingwith a . This is donein O(n)time. When upto a theactualmaximizationstarts; n 1 allvaluesof a are tried, alongsideall valuesofthevariablesappearinginthe 1 unwindingoftheexpression.ThisphaserequiresO(kn)timeintheworstcase, wherekistheboundondomainsizes. A slow-down, quick-up two-phase sequential implementation: A similar procedure, except here the actual best-response table is built as variables are eliminated. ThisrequiresO(kn)timeintheworstcase. Thepayoffisinthesecond phase,wheretheoptimizationrequiresasimpletable-lookupforeachvalueof thevariable,resultinginacomplexityofO(kn). Asynchronous versions: The full linear pass in both directions is not necessary, given only partial dependenceamong variables. Thus in the down phase variables need await a signal from the higher-indexed variables with which they interact(asopposedtoallhigher-indexedvariables)beforecomputingtheirbestresponsefunctions,andsimilarlyinthepassuptheyneedawaitthesignalfrom onlythelower-indexedvariableswithwhichtheyinteract. 2. Fulldiscussionofthispointisbeyondthescopeofthisbook,butfortherecord,thecomplexityofthe algorithmisexponentialinthetreewidthofthecoordinationgraph;thisisthegraphwhosenodesarethe agentsandwhoseedgesconnectagentswhoseQvaluesshareoneormorearguments. Thetreewidthis alsothemaximum clique sizeminus oneinthetriangulation ofthegraph; eachtriangulation essentially correspondstooneofthevariableeliminationorders. Unfortunately,itisNP-hardtocomputetheoptimal ordering.Thenotesattheendofthechapterprovideadditionalreferencesonthetopic. Freeforon-screenuse;pleasedonotdistribute.Youcangetanotherfreecopy ofthisPDFororderthebookathttp://www.masfoundations.org. 28 2 DistributedOptimization Onefinalcomment.WehavediscussedvariableeliminationintheparticularcontextofmultiagentMDPs,butitisrelevantinanycontextinwhichmultipleagents wishtoperformadistributedoptimizationofanfactorableobjectivefunction. 2.3 Negotiation,auctions and optimization Inthissectionweconsiderdistributedproblemsolvingthathasacertaineconomic flavor. In the first section below we will informally give the general philosophy andbackground;inthefollowingtwosectionswewillbemoreprecise. 2.3.1 Fromcontractnetstoauction-likeoptimization contractnet Contract nets were one of the earliest proposals for such an economic approach. Contractnets are not a specific algorithm, but a framework, a protocolfor implementingspecificalgorithms. Ina contractnettheglobalproblemis brokendown intosubtasks,andthesearedistributedamongasetofagents.Eachagenthasdifferentcapabilities;foreachagentithereisafunctionc suchthatforanysetoftasks i T,c (T)isthecostforagentitoachieveallthetasksinT. Eachagentstartsout i withsomeinitial setoftasks, butin generalthisassignmentis notoptimal, inthe sensethatthesumofallagents’costsisnotminimal. Theagentsthenenterintoa negotiationprocesswhichimprovesontheassignmentand,hopefully,culminates inanoptimalassignment,thatis,onewithminimalcost. Furthermore,theprocess anytime can have a so-called anytime property; even if it is interrupted prior to achieving property optimality,itcanachievesignificantimprovementsovertheinitialallocation. Thenegotiationconsistsofagentsrepeatedlycontractingoutassignmentsamong themselves,each contractinvolvingthe exchangeoftasks as well as money. The questionis howthebiddingprocesstakesplaceandwhatcontractsholdbasedon thisbidding. Thegeneralcontract-netprotocolisopenontheseissues. Oneparticularapproachhaseachagentbidforeachsetoftaskstheagent’smarginalcostfor thetask,thatis,theagent’sadditionalcostforaddingthattasktoitscurrentset. The tasksareallocatedtothelowestbidders,andtheprocessrepeats. Itcanbeshown thattherealwaysexistsasequenceofcontractsthatresultintheoptimalallocation. If one is restricted to basic contract types in which one agent contracts a single task to another agent, and receives from him some money in return, then in generalachievingoptimalityrequiresthatagentsenterinto “money-losing"contracts intheprocess. However,thereexistmorecomplexcontracts—whichinvolveconclustercontract tractingfor a bundleoftasks(“cluster contracts"),ora swap oftasksamongtwo agents (“swap contracts"), or simultaneous transfers among manyagents (“multiswapcontract agentcontracts")—whosecombinationallowsforasequenceofcontractsthatare multiagent notmoneylosingandwhichculminateintheoptimalsolution. contract Atthispointseveralquestionsmaynaturallyoccurtothereader. • Westartwithsomeglobalproblemtobesolved,butthenspeakaboutminimizingthetotalcosttotheagents. Whatistheconnectionbetweenthetwo? UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 2.3 Negotiation,auctionsandoptimization 29 • Whenexactlydoagentsmakeoffers,andwhatistheprecisemethodbywhich thecontractsaredecidedon? • Sincewe are in a cooperativesetting, whydoesitmatterwhetheragents“lose money"ornotonagivencontract? Wewill provideananswerto thefirstquestioninthenextsection. Wewill see that,in certainsettings(specifically, thoseoflinearprogrammingandintegerprogramming),findinganoptimalsolutioniscloselyrelatedtotheindividualutilities oftheagents. Regarding the second question, indeed one can provide several instantiations ofeventhespecific,marginal-costversionofthecontract-netprotocol. Inthenext twosectionswewillbemuchmorespecific. Wewilllookataparticularclassofnegotiationschemes,namely(specifickindsof)auctions. Everynegotiationscheme biddingrule consistsofthreeelements: (1)permissiblewaysofmakingoffers(biddingrules), (2) definition of the outcome based on the offers (market clearing rules), and (3) marketclearing the information madeavailable to the agentsthroughoutthe process(information rule dissemination rules). Auctions are a structured way of settling each of these diinformation mensions, and we will look at auctions that do so in specific ways. It should be dissemination mentioned,however,thatthisspecificityisnotwithoutaprice. Whileconvergence rule to optimality in contractnets dependson particularsequencesof contractstaking place, and thus on some coordinating hand, the process is inherently distributed. Theauctionalgorithmswewillstudyincludeanauctioneer,anexplicitcentralized component. Thelastofourquestionsdeservesparticularattention. Aswesaid,westartwith someproblemtobesolved. Wethenproceedtodefineanauction-likeprocessfor solvingit in a distributed fashion. Howeverit is no accidentthatthis section precedesour(ratherdetailed)discussionofauctionsin Chapter11. As we see there, auctionsareawaytoallocatescarceresourcesamongself-interestedagents. Auctiontheorythusbelongstotherealmofgametheory. Inthischapterwealsospeak about auctions, but the discussion has little to do with game theory. In the spirit ofthecontract-netparadigm,inourauctionsagentswillengageinaseriesofbids forresources,andatthe endoftheauctiontheassignmentofthe resourcestothe “winners”oftheauctionwillconstituteanoptimal(ornearoptimal,insomecases) solution. However,in the standardtreatmentofauctions(andthus in Chapter11) thebiddersareassumedtobidinawaythatmaximizestheirpersonalpayoff. Here there is no question of the agents deviating from the prescribed bidding protocol forpersonalgain. Forthisreason,despitethesurfacesimilarity, thediscussionof these auction-like methods makes no reference to game theory or mechanism design. In particular, while these methodshavesome nice properties—forexample, theyareintuitive,provablycorrect,naturallyparallelizable,appropriatefordeploymentindistributedsystemssettings,andtendtoberobusttoslightperturbationsof theproblemspecification—noclaimis madeabouttheirusefulnessin adversarial situations. Forthisreasonitisindeedsomethingofaredherring,inthis cooperativesetting,tofocusonquestionssuchaswhetheragivencontractisprofitablefor Freeforon-screenuse;pleasedonotdistribute.Youcangetanotherfreecopy