thanapayoffof2byplayingB. Hencewehaveanequilibrium. Thesecondequilibrium (B,H),(C,E) islessintuitive.First,notethat (B,G), { } { (C,E) isnotanequilibrium: player2’sbestresponseto(B,G)is(C,F). Thus, } the only reason that player 2 chooses to play the action E is that he knows that player1 wouldplay H at his seconddecisionnode. This behaviorby player1 is called a threat: by committing to choose an action that is harmful to player 2 in hisseconddecisionnode,player1cancauseplayer2toavoidthatpartofthetree. (Notethatplayer1benefitsfrommakingthisthreat:hegetsapayoffof5insteadof 2byplaying(B,H)insteadof(B,G).) Sofarsogood. Theproblem,however,is thatplayer2maynotconsiderplayer1’sthreattobecredible:ifplayer1didreach hisfinaldecisionnode,actuallychoosingH overGwouldalsoreduceplayer1’s ownutility. Ifplayer2playedF,wouldplayer1reallyfollowthroughonhisthreat andplayH,orwouldherelentandpickGinstead? Toformallycapturethereasonwhythe (B,H),(C,E) equilibriumisunsat- { } isfying,andtodefineanequilibriumrefinementconceptthatdoesnotsufferfrom thisproblem,wefirstdefinethenotionofasubgame. Definition5.1.4(Subgame) Givenaperfect-informationextensive-formgameG, thesubgameofGrootedatnodehistherestrictionofGtothedescendantsofh. ThesetofsubgamesofGconsistsofallofsubgamesofGrootedatsomenodein G. Now we can define the notion of a subgame-perfect equilibrium, a refinement UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 5.1 Perfect-informationextensive-formgames 123 1 • A B 2 2 • • C D E F 1 • • • • (3,8) (8,3) (5,5) G H • • (2,10) (1,0) 1 • A B 2 2 • • C D E F 1 • • • • (3,8) (8,3) (5,5) G H • • (2,10) (1,0) Figure 5.5: Two out of the three equilibria of the game from Figure 5.2: (A,G),(C,F) and (B,H),(C,E) . Bold edges indicate players’ choices { } { } ateachnode. of the Nash equilibrium in perfect-information games in extensive form, which eliminatesthoseunwantedNashequilibria.1 subgame-perfect Definition5.1.5(Subgame-perfectequilibrium) Thesubgame-perfectequilibria equilibrium (SPE) ofa gameG are all strategyprofiless suchthatfor anysubgameG′ of G, (SPE) therestrictionofstoG′ isaNashequilibriumofG′. SinceGisitsownsubgame,everySPEisalsoaNashequilibrium. Furthermore, although SPE is a stronger concept than Nash equilibrium (i.e., every SPE is a NE, but not every NE is a SPE) it is still the case that every perfect-information extensive-formgamehasatleastonesubgame-perfectequilibrium. Thisdefinitionrulesout“noncrediblethreats”ofthesortillustratedintheabove example. In particular, note that the extensive-form game in Figure 5.2 has only 1. Notethattheword“perfect”isusedintwodifferentsenseshere. Freeforon-screenuse;pleasedonotdistribute.Youcangetanotherfreecopy ofthisPDFororderthebookathttp://www.masfoundations.org. 124 5 GameswithSequentialActions:ReasoningandComputingwiththeExtensiveForm one subgame-perfect equilibrium, (A,G),(C,F) . Neither of the other Nash { } equilibria is subgame perfect. Consider the subgame rooted at player 1’s second choicenode. TheuniqueNashequilibriumofthis(trivial)gameisforplayer1to play G. Thus the action H, the restriction of the strategies (A,H) and (B,H) tothissubgame,isnotoptimalinthissubgame,andcannotbepartofasubgameperfectequilibriumofthelargergame. 5.1.4 Computingequilibria: backwardinduction n-player,general-sumgames: thebackwardinductionalgorithm Inherent in the concept of subgame-perfect equilibrium is the principle of backbackward wardinduction. Oneidentifiestheequilibriainthe“bottom-most”subgametrees, induction and assumes that those equilibria will be played as one backs up and considers increasingly larger trees. We can use this procedure to compute a sample Nash equilibrium. This is good news: not only are we guaranteed to find a subgameperfectequilibrium(ratherthanpossiblyfindinga Nashequilibriumthatinvolves noncrediblethreats), but also this procedureis computationallysimple. In particular, it can be implemented as a single depth-first traversal of the game tree and thusrequirestime linearinthesizeofthegamerepresentation. Recallincontrast thatthebestknownmethodsforfindingNashequilibriaofgeneralgamesrequire timeexponentialinthesizeofthenormalform;rememberaswellthattheinduced normal form of an extensive-form game is exponentially larger than the original representation. functionBACKWARDINDUCTION (nodeh)returnsu(h) ifh Z then ∈ returnu(h) //hisaterminalnode best_util ← −∞ foralla χ(h)do ∈ util_at_child BACKWARDINDUCTION(σ(h,a)) ← ifutil_at_child > best_util then ρ(h) ρ(h) best_util util_at_child ← returnbest_util Figure 5.6: Procedure for finding the value of a sample (subgame-perfect) Nash equilibriumofaperfect-informationextensive-formgame. ThealgorithmBACKWARDINDUCTION isdescribedinFigure5.6. Thevariable util_at_child is a vector denoting the utility for each player at the child node; util_at_child denotes the element of this vector correspondingto the utility ρ(h) forplayerρ(h)(theplayerwhogetstomoveatnodeh). Similarly,best_utilisa vectorgivingutilitiesforeachplayer. Observethatthis proceduredoes notreturn an equilibrium strategyfor eachof UncorrectedmanuscriptofMultiagentSystems,publishedbyCambridgeUniversityPress Revision1.1©Shoham&Leyton-Brown,2009,2010. 5.1 Perfect-informationextensive-formgames 125 the n players, butratherdescribeshowto labeleachnodewith a vectorofn real numbers. This labelingcanbeseenas anextensionofthe game’sutility function